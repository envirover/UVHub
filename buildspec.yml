version: 0.2
 
phases:
  pre_build:
    commands:
      - wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.2.4.deb
      - wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.2.4.deb.sha512
      - shasum -a 512 -c elasticsearch-6.2.4.deb.sha512 
      - sudo dpkg -i elasticsearch-6.2.4.deb
      - sudo /bin/systemctl daemon-reload
      - sudo /bin/systemctl enable elasticsearch.service
      - sudo systemctl start elasticsearch.service
  build:
    commands:
      - mvn install
artifacts:
  files:
    - 'target/*'
    - 'aws/*'
  discard-paths: yes
  base-directory: distribution
